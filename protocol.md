## The SSP Protocol Specification
### **SSP, short for Six-Seven Protocol**
This document describes the Six-Seven Protocol, an application-layer communication protocol for data exchange between the sensor/actuator nodes and the control panel nodes.

## Terminology
- **Sensor :** In the context of an IoT system, a sensor gathers data from the environment/physical world, and then the real world phenomena gets converted into digital signals.
- **Actuator :** The actuator is the component of the system that takes the digital signals and converts them into physical actions or changes the environment.

    We can think of the sensors as the "eyes and ears" of the system, while the actuators are the "hands and feet".
- **Control-panel nodes** :
- **Sensor/Actuator nodes** :

## Table
| Aspect                           | Specification                                                                                                             | Justification                                                                                                                                                                                                                                                                                                                                              |
|----------------------------------|---------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Underlying Transport             | TCP                                                                                                                       | We use TCP as the underlying transport layer in our protocol. This is mainly because we want the protocol to be reliable, not to mention that the accuracy matters more than the speed.                                                                                                                                                                    |
| Port Number                      | 6767                                                                                                                      | This port number is not used by any other well known protocols: [List of TCP and UDP port numbers](https://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers). In other words, this port number is practical since it avoids conflicts with the other port numbers. We chose this port number for its simplicity and memorability.                    |
| Architecture                     | One central server, which can handle multiple control panel clients. Sensor & actuator nodes are simulated in the server. | Only one server is specified, and, although it is possible to set up multiple servers and machines, we've limited ourselves to one server only for testing, debugging and development purposes. The reason we simulate the sensor / actuator nodes is because we wanted to focus on the protocol logic, and not worry about external real life components. |
| Information Flow                 | Full duplex                                                                                                               | TCP is full duplex, but our application-layer is rather simple: the control panel sends a request, and waits for a corresponding reply. This fits the assignment requirements, as well as keeping the client logic simple.                                                                                                                                 |
| Protocol Type                    | Connection-oriented                                                                                                       | The connections are TCP-sockets. The server keeps the state (greenhouse list, actuators, sensors) across messages. This is necessary for retrieving the environment data.                                                                                                                                                                                  |
| Different Types & Special Values | Message types such as "GET_ALL_GREENHOUSES", "GREENHOUSE_LIST_DATA", "DATA_REQUEST", and "SENSOR_DATA".                   | We use string constants for message types, and values like "ALL" / "SENSOR", or "ACTUATOR", which keeps JSON both readable and extensible.                                                                                                                                                                                                                 |
| Message Format                   | JSON over TCP                                                                                                             | JSON is simple, readable and debuggable. We use the Java maven plugin Gson to meddle with JSON data. Messages get serialized and deserialized, and one line messages separated by a newline simplifies framing.                                                                                                                                            |
| Errors that can occur            | Invalid IDs, JSON parse errors, I/O failures, or unknown message types                                                    | Most of the errors are handled on the server side, and reported back as an INFORMATION message. Unexpected message types can be outputting a "Message type not found" response.                                                                                                                                                                            |
| Realistic Scenario               | Potential farmer(s) uses the control panel to create greenhouses and manage them.                                         | The farmer will be able to create greenhouses, list them, request actuator state and add actuators for a node. This covers the core functionality as per the assignment description.                                                                                                                                                                       |
| Reliability Mechanisms           | The reliability of TCP, as well as message IDs + correlationIDs                                                           | TCP is relied on for ordering and delivery. messageID / correlationID allows for matching replies to requests.                                                                                                                                                                                                                                             |
| Security Mechanisms              | Not yet implemented                                                                                                       | We focused primarily on the protocol design and networking. We assumed a development / lab setting, so security wasn't the first priority. However, in an ideal scenario, in a revised version or if the application were to be realized, we would for sure have implement passwords / authentication tokens.                                              |
